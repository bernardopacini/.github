before_install:
  # login to Docker using Travis encrypted credentials
  - if [[ "$DOCKER_REPO" == "private" ]]; then
      echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin;
    fi

  - docker pull mdolab/$DOCKER_REPO:$DOCKER_TAG
  # run Docker, key is we mount the current Travis directory into Docker to access content of repo
  - docker run -t -d 
        --name app
        --mount "type=bind,src=$(pwd),target=$DOCKER_MOUNT_DIR"
        mdolab/$DOCKER_REPO:$DOCKER_TAG
        /bin/bash
  # set compiler based on docker tag
  - if [[ "$DOCKER_TAG" == *"intel"* ]]; then
      COMPILER=intel;
      CONFIG_MK=$INTEL_CONFIG;
    else
      COMPILER=gcc;
      CONFIG_MK=$GCC_CONFIG;
    fi
